<!DOCTYPE html>
<html lang="en">
<head>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-143360642-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-143360642-1');
</script>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="/files/img/favicon.ico">
<link rel="alternate" type="application/rss+xml" title="Subscribe to Nathan Broslawsky's Blog" href="http://www.nathanbroslawsky.com/blog.rss" />
<title>{{title}}</title>
<!-- Bootstrap core CSS -->
<link href="/files/css/bootstrap.min.css" rel="stylesheet">
<!-- Font Awesome CSS -->
<link href="/files/css/font-awesome.min.css" rel="stylesheet">
<!-- Jasny CSS -->
<link href="/files/css/jasny-bootstrap.min.css" rel="stylesheet">
<!-- Animate CSS -->
<link href="/files/css/animate.css" rel="stylesheet">
<!-- Code CSS -->
<link href="/files/css/tomorrow-night.css" rel="stylesheet" />
<!-- Gallery CSS -->
<link href="/files/css/bootstrap-gallery.css" rel="stylesheet">
<!-- ColorBox CSS -->
<link href="/files/css/colorbox.css" rel="stylesheet">
<!-- Custom font -->
<link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,300,500,600,700,800,900' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Roboto+Slab&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<!-- Custom styles for this template -->
<link href="/files/css/style.css" rel="stylesheet">
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
{{{_sections.head}}}
</head>
<body>
	<div class="page-loader">
		<div class="loader-in">Loading...</div>
		<div class="loader-out">Loading...</div>
	</div>

	<div class="canvas">
		<div class="canvas-overlay"></div>
		<header>
			<nav class="navbar navbar-fixed-top nav-down navbar-laread">
				<div class="container">
					<div class="navbar-header">
						<a class="navbar-brand" href="/">
							<img height="128" src="/files/img/logo-black.svg" alt="">
						</a>
					</div>
{{!-- 					<div class="get-post-titles">
						<button type="button" class="navbar-toggle push-navbar" data-navbar-type="default">
							<i class="fa fa-bars"></i>
						</button>
					</div> --}}
					<button type="button" class="navbar-toggle collapsed menu-collapse" data-toggle="collapse" data-target="#main-nav">
						<span class="sr-only">Toggle navigation</span>
						<i class="fa fa-bars"></i>
					</button>
					<div class="collapse navbar-collapse" id="main-nav">
						<ul class="nav navbar-nav">
							<li>
								<a href="/" role="button" aria-expanded="false">HOME</a>
							</li>
							<li>
								<a href="/about" role="button" aria-expanded="false">ABOUT</a>
							</li>
							<li>
								<a href="/newsletter" role="button" aria-expanded="false">NEWSLETTER</a>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</nav>
		</header>

		{{{body}}}

		<footer class="container-fluid footer">
			<div class="container text-center">
				<ul class="about-social">
					<li><a href="https://www.linkedin.com/in/broslawsky" target="_blank"><i class="fa fa-linkedin"></i></a></li>
					<li><a href="https://www.twitter.com/nbroslawsky" target="_blank"><i class="fa fa-twitter"></i></a></li>
					<li><a href="https://www.github.com/nbroslawsky" target="_blank"><i class="fa fa-github"></i></a></li>
					<li><a href="/blog.rss" target="_blank"><i class="fa fa-rss"></i></a></li>
				</ul>
				<div class="footer-logo">
					<img src="/files/img/skull-black.svg" alt="" width="200">
				</div>
				<p class="copyright">&copy; Nathan Broslawsky {{year}}</p>
			</div>
		</footer>
	</div>

	<!-- Bootstrap core JavaScript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="/files/js/jquery.min.js"></script>
	<script src="/files/js/bootstrap.min.js"></script>
	<script src="/files/js/jasny-bootstrap.min.js"></script>
	<script src="/files/js/prettify.js"></script>
	<script src="/files/js/lang-css.js"></script>
	<script src="/files/js/jquery.blueimp-gallery.min.js"></script>
	<script src="/files/js/imagesloaded.js"></script>
	<script src="/files/js/masonry.js"></script>
	<script src="/files/js/jquery.dotdotdot.min.js"></script>
	<script src="/files/js/jquery.colorbox-min.js"></script>
	<script src="/files/js/jquery.nicescroll.min.js"></script>
	<script src="/files/js/viewportchecker.js"></script>
	<script src="/files/js/isotope.pkgd.min.js"></script>
	<script src="/files/js/jquery.ellipsis.min.js"></script>
	<script src="/files/js/modernizr.custom.js"></script>
	<script src="/files/js/classie.js"></script>
	<script src="/files/js/uiProgressButton.js"></script>
	<script src="/files/js/jquery.touchSwipe.min.js"></script>
	<script src="/files/js/script.js"></script>
	<script>

		var $form = $('#form-email-signup')
		var $emailInput = $('input[name="MERGE0"]', $form)
		var $responseText = $('.response-text', $form)

		$form.submit(function(e) {
			e.preventDefault()
			e.stopPropagation()

			var emailRegex = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
			var emailValue = $emailInput.val() || ''

			$responseText.html('')
			if(!emailRegex.test(emailValue)) {
				$form.attr("data-verdict","failed-validation")
				$form.attr("data-response","You must enter a well-formed email address")
				return false;
			}

			$.ajax({
				type: $form.attr('method'),
				url: $form.attr('action'),
				data: $form.serialize(),
				cache: false,
				dataType: 'jsonp',
				contentType: "application/json; charset=utf-8",
				error: function(err) {
					$form.attr("data-verdict","failed-request")
					$form.attr("data-response","We had an issue submitting your email address to MailChimp.")
				},
				success: function(data) {
					if(data.result != "success") {
						$form.attr("data-verdict","failed-request")
						$form.attr("data-response",data.msg)
						return
					}

					$form.attr("data-verdict","success")
					$form.attr("data-response",data.msg)
				}
			})
		});

		[].slice.call( document.querySelectorAll( '.progress-button' ) ).forEach( function( bttn, pos ) {
			new UIProgressButton( bttn, {
				statusTime: 2000,
				callback : function( instance ) {
					var progress = 0,
						interval,
						statusMap = {
							'failed-validation': function() {
								$emailInput.addClass('input-error')
								$emailInput.one('keypress', function() {
									$emailInput.removeClass('input-error')
								})
								return -1 
							},
							'failed-request': function() { return -1 },
							'success': function() { return 1 }
						}

					interval = setInterval( function() {

						var verdict = $form.attr("data-verdict")
						if(verdict && statusMap[verdict]) {
							instance.setProgress(1)
							instance.stop(statusMap[verdict]())
							clearInterval(interval)
							$form.attr("data-verdict", "")
							$responseText.html($form.attr("data-response"))
							$responseText.find('a').each(function(e) {
								$(this).attr('target','_blank')
							})
							return;
						}

						//implemented a backoff to wait for the xhr call to finish
						var increment = Math.random() * 0.1
						increment *= (1-progress)
						progress = Math.min( progress + increment, .99 );
						instance.setProgress( progress );
						if(progress === 1) {
							instance.stop(-1)
							clearInterval(interval)
						}

					}, 100);
				}
			});
		});

	</script>
</body>
</html>
