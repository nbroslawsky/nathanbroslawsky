!function(t){"use strict";function s(t,s){for(var i in s)s.hasOwnProperty(i)&&(t[i]=s[i]);return t}function i(t){this.el=t,this.paths=[].slice.call(this.el.querySelectorAll("path")),this.pathsArr=new Array,this.lengthsArr=new Array,this._init()}function e(t,i){this.el=t,this.options=s({},this.options),s(this.options,i),this._init()}var r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},n=r[Modernizr.prefixed("transition")],o={transitions:Modernizr.csstransitions};i.prototype._init=function(){var t=this;this.paths.forEach(function(s,i){t.pathsArr[i]=s,s.style.strokeDasharray=t.lengthsArr[i]=s.getTotalLength()}),this.draw(0)},i.prototype.draw=function(t){for(var s=0,i=this.pathsArr.length;i>s;++s)this.pathsArr[s].style.strokeDashoffset=this.lengthsArr[s]*(1-t)},e.prototype.options={statusTime:1500},e.prototype._init=function(){this.button=this.el.querySelector("button"),this.progressEl=new i(this.el.querySelector("svg.progress-circle")),this.successEl=new i(this.el.querySelector("svg.checkmark")),this.errorEl=new i(this.el.querySelector("svg.cross")),this._initEvents(),this._enable()},e.prototype._initEvents=function(){var t=this;this.button.addEventListener("click",function(){t._submit()})},e.prototype._submit=function(){classie.addClass(this.el,"loading");var t=this,s=function(i){if(o.transitions){if("width"!==i.propertyName)return!1;this.removeEventListener(n,s)}this.setAttribute("disabled",""),"function"==typeof t.options.callback?t.options.callback(t):(t.setProgress(1),t.stop())};o.transitions?this.button.addEventListener(n,s):s()},e.prototype.stop=function(t){var s=this,i=function(){if(s.progressEl.draw(0),"number"==typeof t){var i=t>=0?"success":"error",e=t>=0?s.successEl:s.errorEl;e.draw(1),classie.addClass(s.el,i),setTimeout(function(){classie.remove(s.el,i),e.draw(0),s._enable()},s.options.statusTime)}else s._enable();classie.removeClass(s.el,"loading")};setTimeout(i,300)},e.prototype.setProgress=function(t){this.progressEl.draw(t)},e.prototype._enable=function(){this.button.removeAttribute("disabled")},t.UIProgressButton=e}(window);